<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible"
        content="IE=edge">
  <meta name="viewport"
        content="width=device-width,initial-scale=1.0">
  <link rel="icon"
        href="<%= BASE_URL %>favicon.ico">
  <title><%= htmlWebpackPlugin.options.title %></title>
</head>
<body>
<noscript>
  <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled.
    Please enable it to continue.</strong>
</noscript>
<div>
  i am first contentful paint
</div>
<img id="out-img" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fcdn.duitang.com%2Fuploads%2Fitem%2F201303%2F29%2F20130329205806_kTTnv.thumb.700_0.jpeg&refer=http%3A%2F%2Fcdn.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1628407282&t=7806c7982f1de642a2c38a555211da23"
     alt="">
<div id="app">
</div>
<script src="http://localhost:2021/wpDist/web-performance.min.js"></script>
<script>
  window.wv = new MITO.WebVitals({
    appId: 'allen-test',
    version: '1.0.0',
    reportCallback: (metrics) => {
      if(window.wv){
        const infos = window.wv.getCurrentMetrics()

        const pageInfo = infos['page-information']
        const networkInfo = infos['network-information']
        const deviceInfo = infos['device-information']

        function mergeData(data) {
          const { data: { name, ...metrics }, ...rest } = data
          if (name !== 'resource-flow' && name.indexOf('info') < 0) {
            return { name, ...metrics, ...rest, ...pageInfo.value, ...networkInfo.value, ...deviceInfo.value }
          }
          return data
        }

        // todo e.g clean data to report for analyzing
        console.log(mergeData(metrics))
      }
    },
    immediately: true,
    customPaintMetrics: 'custom-finish-paint',
    logFpsCount:10
  })
</script>
<!--<script>-->
<!--  !(function(c,b,d,a){c[a]||(c[a]={});c[a].config={pid:"drygzkn9zh@161c72837ddcb3f",appType:"web",imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",sendResource:true,enableLinkTrace:true,behavior:true,enableSPA:true,useFmp:true,enableConsole:true,autoSendPerf:false};-->
<!--    with(b)with(body)with(insertBefore(createElement("script"),firstChild))setAttribute("crossorigin","",src=d)-->
<!--  })(window,document,"https://retcode.alicdn.com/retcode/bl.js","__bl");-->
<!--</script>-->
<!--<script src="//lib.baomitu.com/jquery/3.5.0/jquery.js"></script>-->
<!--<script src="./lib/dynamicScript.js"></script>-->
<!-- built files will be auto injected -->
<!--<script>-->
<!--  const outImg = document.querySelector('#out-img')-->
<!--  outImg.addEventListener('load', () => {-->
<!--    console.log('out-img', performance.now())-->
<!--  })-->
<!--</script>-->
</body>
<!--<script async src="./lib/bigJs.js"></script>-->
<!--<script defer src="./lib/afterOnLoadJS.js"></script>-->
</html>
